{"version":3,"sources":["core.babeled.min.js","core.babeled.js"],"names":["require","Map","MapView","ArcGISDynamicLayer","FeatureLayer","PopupTemplate","Legend","Compass","CompassVM","Home","HomeVM","map","basemap","view","container","zoom","center","content","zoningLyr","title","url","add","compass","viewModel","startup","homeBtn","legend","switchLyr","authLyr","id","popupTemplate","i","lyrs","newLyr","console","log","visible","to","val","lyrid","refresh","layerControl","$","change","this"],"mappings":"AAAA,YCAAA,UACI,WACA,qBACA,iCACA,2BACA,qBACA,sBACA,uBACA,wCACA,oBACA,kCACA,kBACD,SAASC,EAAKC,EAASC,EAAoBC,EAAcC,EAAeC,EAAQC,EAASC,EAAWC,EAAMC,GACzG,GAAIC,GAAM,GAAIV,IACVW,QAAS,WAGTC,EAAO,GAAIX,IACXY,UAAW,gBACXH,IAAKA,EACLI,KAAM,EACNC,QAAS,MAAO,MAQhBC,EAAU,gLAOVC,GAJK,GAAIb,IACTc,MAAO,QACPF,QAASA,IAEG,GAAIb,IAChBgB,IAAK,iEAGTT,GAAIU,IAAIH,EA5ByG,IA8B7GI,GAAU,GAAIf,IACdgB,UAAW,GAAIf,IACXK,KAAMA,KAEX,aACHS,GAAQE,SAER,IAAIC,GAAU,GAAIhB,IACdc,UAAW,GAAIb,IACXG,KAAMA,KAEX,UACHY,GAAQD,SAER,IAAIE,GAAS,GAAIpB,IAASO,KAAMA,GAAQ,SACxCa,GAAOF,SACP,IAAIG,GAAY,WAEZ,GAAIC,GAAU,GAAIxB,IACdyB,GAAI,UACJT,IAAK,+DACLU,cAAe,GAAIzB,IACfc,MAAO,QACPF,QAAS,YAAcc,EAAI,kBAGnCpB,GAAIU,IAAIO,EAGR,KAAK,GADDI,IAASJ,QAASA,GACbG,EAAI,EAAO,EAAJA,EAAOA,IAAK,CACxB,GAAIE,GAAS,GAAI7B,IACbyB,GAAK,WAAaE,EAClBX,IAAK,8DAAgEW,EACrED,cAAe,GAAIzB,IACfc,MAAO,QACPF,QAAS,YAAcc,EAAI,6BAGnCG,SAAQC,IAAIF,GATYA,EAWjBG,SAAU,EACjBzB,EAAIU,IAAIY,GACRD,EAAKC,EAAOJ,IAAMI,EAEtB,OACII,GAAI,SAAYC,GACZ,IAAK,GAAIC,KAASP,GACdA,EAAKO,GAAOH,SAAU,EAClBG,GAAS,WAAaD,IACtBN,EAAKO,GAAOH,SAAU,EAG9BV,GAAOc,UACPC,QAKZC,GAAE,gBAAgBC,OAAO,WACrBhB,EAAUU,GAAGK,EAAEE,MAAMN,QAKzB,IAAIG,GAAe","file":"core.babeled.min.js","sourcesContent":["\"use strict\";\n\nrequire([\"esri/Map\", \"esri/views/MapView\", \"esri/layers/ArcGISDynamicLayer\", \"esri/layers/FeatureLayer\", \"esri/PopupTemplate\", \"esri/widgets/Legend\", \"esri/widgets/Compass\", \"esri/widgets/Compass/CompassViewModel\", \"esri/widgets/Home\", \"esri/widgets/Home/HomeViewModel\", \"dojo/domReady!\"], function (Map, MapView, ArcGISDynamicLayer, FeatureLayer, PopupTemplate, Legend, Compass, CompassVM, Home, HomeVM) {\n    var map = new Map({\n        basemap: \"oceans\"\n    });\n\n    var view = new MapView({\n        container: \"map-container\",\n        map: map,\n        zoom: 9,\n        center: [121.5, 33]\n    });\n\n    /*var lyr = new ArcGISDynamicLayer({\r\n        url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer\"\r\n    });\r\n    map.add(lyr);*/\n\n    var content = \"<b>{FID}</b> {OBJECTID}<br>\" + \"功能区类型:{功能区类型}<br>\" + \"{SHAPE_LEN}\" + \"<img src='https://www.google.com/logos/doodles/2016/mohammed-ghani-hikmats-87th-birthday-5708620060688384-hp2x.jpg' />\";\n\n    var pt = new PopupTemplate({\n        title: '{FID}',\n        content: content\n    });\n    var zoningLyr = new FeatureLayer({\n        url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/5\"\n    });\n    //popupTemplate: pt\n    map.add(zoningLyr);\n    /**/\n    var compass = new Compass({\n        viewModel: new CompassVM({\n            view: view\n        })\n    }, \"compassDiv\");\n    compass.startup();\n\n    var homeBtn = new Home({\n        viewModel: new HomeVM({\n            view: view\n        })\n    }, \"homeDiv\");\n    homeBtn.startup();\n\n    var legend = new Legend({ view: view }, 'legend');\n    legend.startup();\n    var switchLyr = function () {\n\n        var authLyr = new FeatureLayer({\n            id: 'authLyr',\n            url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/0\",\n            popupTemplate: new PopupTemplate({\n                title: 'title',\n                content: \"layer.No.\" + i + \"<b>{FID}</b>\"\n            })\n        });\n        map.add(authLyr);\n\n        var lyrs = { authLyr: authLyr };\n        for (var i = 1; i < 5; i++) {\n            var newLyr = new FeatureLayer({\n                id: 'feature-' + i,\n                url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/\" + i,\n                popupTemplate: new PopupTemplate({\n                    title: 'title',\n                    content: \"layer.No.\" + i + \"<br><b>{FID}</b>{用海一级类}\"\n                })\n            });\n            console.log(newLyr);\n            //add but do not show\n            newLyr.visible = false;\n            map.add(newLyr);\n            lyrs[newLyr.id] = newLyr;\n        }\n        return {\n            to: function to(val) {\n                for (var lyrid in lyrs) {\n                    lyrs[lyrid].visible = false;\n                    if (lyrid == 'feature-' + val) {\n                        lyrs[lyrid].visible = true;\n                    }\n                }\n                legend.refresh();\n                layerControl();\n            }\n        };\n    }();\n\n    $('#aythLyrCata').change(function () {\n        switchLyr.to($(this).val());\n    });\n\n    var layerControl = function () {\n        var specificLyrs = {};\n\n        function setCheckbox() {\n            $('.esri-legend-service').each(function () {\n                var legendSvcLyr = $(this);\n                var label = legendSvcLyr.find('.esri-legend-service-label').text();\n                var lyrName = label.substring(label.lastIndexOf(' ') + 1);\n                console.log(lyrName);\n                var layer = legendSvcLyr.find('.esri-legend-layer').first();\n                //loop through table rows\n                layer.find('tr').each(function () {\n                    var tr = $(this);\n                    var tds = tr.find('td');\n                    if (tds && tds.length && tds.length > 1) {\n                        var sym = $(this).find('td').first();\n                        var cata = '';\n                        //find the cell has text, which should be catagory info\n                        $(this).find('td').each(function () {\n                            var td = $(this);\n                            if (!td.find('table')[0]) {\n                                var txt = $(this).text();\n                                if (txt && txt.length > 0) {\n                                    //add checkbox\n                                    var checkBox = $('<input>').attr({ 'type': 'checkbox', 'data-lyr': lyrName, 'data-cata': txt }).prop('checked', true).text(txt).change(function () {\n                                        if ($(this).is(':checked')) {\n                                            console.log('y');\n                                            //showCata($(this).text())\n                                            return;\n                                        }\n                                        console.log('n');\n                                    });\n                                    var newtd = $('<td>').append(checkBox);\n                                    //insert checkbox\n                                    newtd.insertBefore(sym);\n                                }\n                            }\n                        });\n                    }\n                });\n            });\n        }\n    }();\n});","require([\r\n    \"esri/Map\",\r\n    \"esri/views/MapView\",\r\n    \"esri/layers/ArcGISDynamicLayer\",\r\n    \"esri/layers/FeatureLayer\",\r\n    \"esri/PopupTemplate\",\r\n    \"esri/widgets/Legend\",\r\n    \"esri/widgets/Compass\",\r\n    \"esri/widgets/Compass/CompassViewModel\",\r\n    \"esri/widgets/Home\",\r\n    \"esri/widgets/Home/HomeViewModel\",\r\n    \"dojo/domReady!\"\r\n], function(Map, MapView, ArcGISDynamicLayer, FeatureLayer, PopupTemplate, Legend, Compass, CompassVM, Home, HomeVM) {\r\n    var map = new Map({\r\n        basemap: \"oceans\"\r\n    });\r\n\r\n    var view = new MapView({\r\n        container: \"map-container\",\r\n        map: map,\r\n        zoom: 9,\r\n        center: [121.5, 33]\r\n    });\r\n\r\n    /*var lyr = new ArcGISDynamicLayer({\r\n        url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer\"\r\n    });\r\n    map.add(lyr);*/\r\n\r\n    var content = \"<b>{FID}</b> {OBJECTID}<br>\" +\r\n        \"功能区类型:{功能区类型}<br>\" + \"{SHAPE_LEN}\" + \"<img src='https://www.google.com/logos/doodles/2016/mohammed-ghani-hikmats-87th-birthday-5708620060688384-hp2x.jpg' />\";\r\n\r\n    var pt = new PopupTemplate({\r\n        title: '{FID}',\r\n        content: content\r\n    });\r\n    var zoningLyr = new FeatureLayer({\r\n        url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/5\",\r\n        //popupTemplate: pt\r\n    });\r\n    map.add(zoningLyr);\r\n    /**/\r\n    var compass = new Compass({\r\n        viewModel: new CompassVM({\r\n            view: view\r\n        })\r\n    }, \"compassDiv\");\r\n    compass.startup();\r\n\r\n    var homeBtn = new Home({\r\n        viewModel: new HomeVM({\r\n            view: view\r\n        })\r\n    }, \"homeDiv\");\r\n    homeBtn.startup();\r\n\r\n    var legend = new Legend({ view: view }, 'legend');\r\n    legend.startup();\r\n    var switchLyr = function() {\r\n\r\n        var authLyr = new FeatureLayer({\r\n            id: 'authLyr',\r\n            url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/0\",\r\n            popupTemplate: new PopupTemplate({\r\n                title: 'title',\r\n                content: \"layer.No.\" + i + \"<b>{FID}</b>\"\r\n            })\r\n        });\r\n        map.add(authLyr);\r\n\r\n        var lyrs = { authLyr: authLyr };\r\n        for (var i = 1; i < 5; i++) {\r\n            var newLyr = new FeatureLayer({\r\n                id : 'feature-' + i,\r\n                url: \"http://localhost:6080/arcgis/rest/services/04202/MapServer/\" + i,\r\n                popupTemplate: new PopupTemplate({\r\n                    title: 'title',\r\n                    content: \"layer.No.\" + i + \"<br><b>{FID}</b>{用海一级类}\"\r\n                })\r\n            });\r\n            console.log(newLyr);\r\n            //add but do not show\r\n            newLyr.visible = false;\r\n            map.add(newLyr);\r\n            lyrs[newLyr.id] = newLyr;\r\n        }\r\n        return {\r\n            to: function to(val) {\r\n                for (var lyrid in lyrs) {\r\n                    lyrs[lyrid].visible = false;\r\n                    if (lyrid == 'feature-' + val) {\r\n                        lyrs[lyrid].visible = true;\r\n                    }\r\n                }\r\n                legend.refresh();\r\n                layerControl();\r\n            }\r\n        }\r\n    }();\r\n\r\n    $('#aythLyrCata').change(function() {\r\n        switchLyr.to($(this).val());\r\n    });\r\n\r\n\r\n\r\n    var layerControl = function() {\r\n        var specificLyrs = {};\r\n\r\n        function setCheckbox() {\r\n            $('.esri-legend-service').each(function() {\r\n                var legendSvcLyr = $(this);\r\n                var label = legendSvcLyr.find('.esri-legend-service-label').text();\r\n                var lyrName = label.substring(label.lastIndexOf(' ') + 1);\r\n                console.log(lyrName);\r\n                var layer = legendSvcLyr.find('.esri-legend-layer').first();\r\n                //loop through table rows\r\n                layer.find('tr').each(function() {\r\n                    var tr = $(this);\r\n                    var tds = tr.find('td');\r\n                    if (tds && tds.length && tds.length > 1) {\r\n                        var sym = $(this).find('td').first();\r\n                        var cata = '';\r\n                        //find the cell has text, which should be catagory info\r\n                        $(this).find('td').each(function() {\r\n                            var td = $(this);\r\n                            if (!(td.find('table')[0])) {\r\n                                var txt = $(this).text();\r\n                                if (txt && txt.length > 0) {\r\n                                    //add checkbox\r\n                                    var checkBox = $('<input>').attr({ 'type': 'checkbox', 'data-lyr': lyrName, 'data-cata': txt }).prop('checked', true).text(txt).change(function() {\r\n                                        if ($(this).is(':checked')) {\r\n                                            console.log('y');\r\n                                            //showCata($(this).text())\r\n                                            return;\r\n                                        }\r\n                                        console.log('n');\r\n                                    });\r\n                                    var newtd = $('<td>').append(checkBox);\r\n                                    //insert checkbox\r\n                                    newtd.insertBefore(sym);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n            });\r\n        }\r\n    }();\r\n});\r\n"],"sourceRoot":"/source/"}