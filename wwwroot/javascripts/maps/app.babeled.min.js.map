{"version":3,"sources":["app.babeled.min.js","app.babeled.js"],"names":["showLegend","$","addClass","css","hideLegend","removeClass","createChart","qstr","title","show","get","res","data","tempSrc","dataSrc","newChart","fChart","startup","container","initType","arguments","length","undefined","this","chartType","FusionCharts","ready","tempData","events","chartClick","evt","dat","console","log","dataLabelClick","type","renderAt","width","height","dataFormat","dataSource","render","_this","$selectChart","off","val","change","column2d","caption","yAxisName","theme","pie2d","showBorder","use3DLighting","enableSmartLabels","startingAngle","showLabels","showPercentValues","centerLabelBold","showTooltip","decimals","useDataPlotColorForLabels","column3d","pie3d","line2d","lineThickness","paletteColors","baseFontColor","baseFont","captionFontSize","subcaptionFontSize","subcaptionFontBold","bgColor","showShadow","canvasBgColor","canvasBorderAlpha","divlineAlpha","divlineColor","divlineThickness","divLineIsDashed","divLineDashLen","divLineGapLen","showXAxisLine","xAxisLineThickness","xAxisLineColor","showAlternateHGridColor","toggleEdit","editBtn","next","startEdit","parent","find","cancelEdit","submitEdit","xhr","XMLHttpRequest","withCredentials","open","onload","json","JSON","parse","responseText","hero","background","window","location","host","background-size","remove","frm","formData","FormData","fid","append","send","document","click","dropdown","accordion","field","btn","body","hasClass","hide","attr"],"mappings":"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","file":"app.babeled.min.js","sourcesContent":["'use strict';\n\n$(document).ready(function () {\n    $(\"input[value='on']\").click();\n    $('.ui.dropdown').dropdown();\n    $('.ui.accordion').accordion();\n\n    //click show charts\n    $('#status > div > a').click(function () {\n        var field = $(this).data('type');\n        var qstr = 'SELECT `' + field + '` as label, count(`' + field + '` = `' + field + '`) as value FROM gis1.authorizing group by `' + field + '`';\n        createChart(qstr, field);\n    });\n\n    //click expand full screen\n    $('a#fullScreen').click(function () {\n        var btn = $(this);\n        var body = $('body');\n        if (body.hasClass('full-screen')) {\n            body.removeClass('full-screen');\n            btn.find('.fa-compress').hide();\n            btn.find('.fa-expand').show();\n            btn.attr('title', 'exit full screen');\n        } else {\n            body.addClass('full-screen');\n            btn.find('.fa-expand').hide();\n            btn.find('.fa-compress').show();\n            btn.attr('title', 'expand full screen');\n        }\n    });\n});\n\nfunction showLegend() {\n    $('#top-right-legend').addClass('shown');\n    $('.show-legend').css('display', 'none');\n    $('.hide-legend').css('display', 'inline-block');\n}\n\nfunction hideLegend() {\n    $('#top-right-legend').removeClass('shown');\n    $('.hide-legend').css('display', 'none');\n    $('.show-legend').css('display', 'inline-block');\n}\n\nfunction createChart(qstr, title) {\n    $('#bottom-left-view').show();\n    $('.chart-container').show();\n    $.get('http://localhost:3000/exq?qs=' + qstr, function (res) {\n\n        var data = res;\n        /*for (let key in res[0]) {\r\n            data.push({\r\n                \"label\": key,\r\n                \"value\": res[0][key]\r\n            })\r\n        }*/\n\n        var tempSrc = new dataSrc(title, data);\n        var newChart = new fChart(title, tempSrc, \"myChart\");\n        newChart.startup();\n    });\n}\n\nfunction fChart(title, dataSrc, container) {\n    var initType = arguments.length <= 3 || arguments[3] === undefined ? 'column2d' : arguments[3];\n\n    this.show = function (chartType) {\n\n        FusionCharts.ready(function () {\n            var tempData = {\n                data: dataSrc.data,\n                events: {\n                    \"chartClick\": function chartClick(evt, dat) {\n                        console.log(evt);\n                        console.log(dat);\n                    },\n                    \"dataLabelClick\": function dataLabelClick(evt, dat) {\n                        console.log(evt);\n                        console.log(dat);\n                    }\n                }\n            };\n            tempData[\"chart\"] = dataSrc[chartType];\n            var newChart = new FusionCharts({\n                \"type\": chartType,\n                \"renderAt\": container,\n                \"width\": \"500\",\n                \"height\": \"300\",\n                \"dataFormat\": \"json\",\n                \"dataSource\": tempData\n            });\n\n            newChart.render();\n        });\n    };\n    this.startup = function () {\n        var _this = this;\n\n        this.show(initType);\n        var $selectChart = $('select[name=chartType]');\n        $selectChart.off('change');\n        $selectChart.val(initType);\n        $selectChart.change(function () {\n            _this.show($selectChart.val());\n        });\n    };\n}\n\nfunction dataSrc(title, data) {\n    this.column2d = {\n        \"caption\": title,\n        \"yAxisName\": \"数量\",\n        \"theme\": \"fint\"\n    };\n    this.pie2d = {\n        \"caption\": title,\n        \"showBorder\": \"0\",\n        \"use3DLighting\": \"0\",\n        \"enableSmartLabels\": \"0\",\n        \"startingAngle\": \"310\",\n        \"showLabels\": \"0\",\n        \"showPercentValues\": \"1\",\n        \"showLegend\": \"1\",\n        \"centerLabelBold\": \"1\",\n        \"showTooltip\": \"0\",\n        \"decimals\": \"0\",\n        \"useDataPlotColorForLabels\": \"1\",\n        \"theme\": \"fint\"\n    };\n    this.column3d = {\n        \"caption\": title,\n        \"yAxisName\": \"数量\",\n        \"theme\": \"fint\"\n    };\n    this.pie3d = {\n        \"caption\": title,\n        \"showBorder\": \"0\",\n        \"use3DLighting\": \"0\",\n        \"enableSmartLabels\": \"0\",\n        \"startingAngle\": \"310\",\n        \"showLabels\": \"0\",\n        \"showPercentValues\": \"1\",\n        \"showLegend\": \"1\",\n        \"centerLabelBold\": \"1\",\n        \"showTooltip\": \"0\",\n        \"decimals\": \"0\",\n        \"useDataPlotColorForLabels\": \"1\",\n        \"theme\": \"fint\"\n    };\n    this.line2d = {\n        \"caption\": title,\n        \"yAxisName\": \"数量\",\n        \"lineThickness\": \"2\",\n        \"paletteColors\": \"#0075c2\",\n        \"baseFontColor\": \"#333333\",\n        \"baseFont\": \"Helvetica Neue,Arial\",\n        \"captionFontSize\": \"14\",\n        \"subcaptionFontSize\": \"14\",\n        \"subcaptionFontBold\": \"0\",\n        \"showBorder\": \"0\",\n        \"bgColor\": \"#ffffff\",\n        \"showShadow\": \"0\",\n        \"canvasBgColor\": \"#ffffff\",\n        \"canvasBorderAlpha\": \"0\",\n        \"divlineAlpha\": \"100\",\n        \"divlineColor\": \"#999999\",\n        \"divlineThickness\": \"1\",\n        \"divLineIsDashed\": \"1\",\n        \"divLineDashLen\": \"1\",\n        \"divLineGapLen\": \"1\",\n        \"showXAxisLine\": \"1\",\n        \"xAxisLineThickness\": \"1\",\n        \"xAxisLineColor\": \"#999999\",\n        \"showAlternateHGridColor\": \"0\"\n    };\n    this.data = data;\n}\n\nfunction toggleEdit() {\n    var editBtn = $(this);\n    var submitBtn = editBtn.next('.button.submit');\n}\n\nfunction startEdit() {\n    var editBtn = $(this);\n    var container = editBtn.parent('.popup-content-custom');\n    editBtn.addClass('hidden');\n    container.find('.in-edit').removeClass('hidden');\n    $('td.display').addClass('hidden');\n    $('td.input').removeClass('hidden');\n}\n\nfunction cancelEdit() {\n    var container = $(this).parent('.popup-content-custom');\n    var editBtn = container.find('.edit');\n    container.find('.in-edit').addClass('hidden');\n    editBtn.removeClass('hidden');\n    $('td.input').addClass('hidden');\n    $('td.display').removeClass('hidden');\n}\n\nfunction submitEdit() {\n    var xhr = new XMLHttpRequest();\n    xhr.withCredentials = false;\n    xhr.open('POST', '/update');\n\n    xhr.onload = function () {\n        var json = JSON.parse(xhr.responseText);\n        hero.css({ 'background': 'url(\"http://' + window.location.host + json.location + '\")', 'background-size': 'cover' });\n        $('.input-hero-img').val(json.location).change();\n        //label.removeClass('pct').addClass('btn').text('change');\n        $('.temp-input').remove();\n    };\n    //xhr.upload.addEventListener(\"progress\", updateProgress, false);\n    var frm = $(this).next('form')[0];\n    var formData = new FormData(frm);\n    var fid = $(this).data('id');\n    formData.append('id', fid);\n    xhr.send(formData);\n}","$(document).ready(() => {\r\n    $(\"input[value='on']\").click();\r\n    $('.ui.dropdown').dropdown();\r\n    $('.ui.accordion').accordion();\r\n\r\n    //click show charts\r\n    $('#status > div > a').click(function() {\r\n        var field = $(this).data('type');\r\n        var qstr = 'SELECT `' + field + '` as label, count(`' + field + '` = `' + field + '`) as value FROM gis1.authorizing group by `' + field + '`';\r\n        createChart(qstr, field);\r\n    });\r\n\r\n    //click expand full screen\r\n    $('a#fullScreen').click(function() {\r\n        var btn = $(this);\r\n        var body = $('body');\r\n        if (body.hasClass('full-screen')) {\r\n            body.removeClass('full-screen');\r\n            btn.find('.fa-compress').hide();\r\n            btn.find('.fa-expand').show();\r\n            btn.attr('title','exit full screen');\r\n        } else {\r\n            body.addClass('full-screen');\r\n            btn.find('.fa-expand').hide();\r\n            btn.find('.fa-compress').show();\r\n            btn.attr('title','expand full screen');\r\n        }\r\n    })\r\n\r\n})\r\n\r\nfunction showLegend() {\r\n    $('#top-right-legend').addClass('shown');\r\n    $('.show-legend').css('display', 'none');\r\n    $('.hide-legend').css('display', 'inline-block');\r\n}\r\n\r\nfunction hideLegend() {\r\n    $('#top-right-legend').removeClass('shown');\r\n    $('.hide-legend').css('display', 'none');\r\n    $('.show-legend').css('display', 'inline-block');\r\n}\r\n\r\nfunction createChart(qstr, title) {\r\n    $('#bottom-left-view').show();\r\n    $('.chart-container').show();\r\n    $.get('http://localhost:3000/exq?qs=' + qstr, function(res) {\r\n\r\n\r\n        var data = res;\r\n        /*for (let key in res[0]) {\r\n            data.push({\r\n                \"label\": key,\r\n                \"value\": res[0][key]\r\n            })\r\n        }*/\r\n\r\n        var tempSrc = new dataSrc(title, data);\r\n        var newChart = new fChart(title, tempSrc, \"myChart\");\r\n        newChart.startup();\r\n\r\n    })\r\n\r\n}\r\n\r\nfunction fChart(title, dataSrc, container, initType = 'column2d') {\r\n    this.show = function(chartType) {\r\n\r\n        FusionCharts.ready(function() {\r\n            var tempData = {\r\n                data: dataSrc.data,\r\n                events: {\r\n                    \"chartClick\": function(evt, dat) {\r\n                        console.log(evt);\r\n                        console.log(dat);\r\n                    },\r\n                    \"dataLabelClick\": function(evt, dat) {\r\n                        console.log(evt);\r\n                        console.log(dat);\r\n                    },\r\n                }\r\n            };\r\n            tempData[\"chart\"] = dataSrc[chartType];\r\n            var newChart = new FusionCharts({\r\n                \"type\": chartType,\r\n                \"renderAt\": container,\r\n                \"width\": \"500\",\r\n                \"height\": \"300\",\r\n                \"dataFormat\": \"json\",\r\n                \"dataSource\": tempData\r\n            });\r\n\r\n            newChart.render();\r\n        })\r\n    };\r\n    this.startup = function() {\r\n        this.show(initType);\r\n        var $selectChart = $('select[name=chartType]');\r\n        $selectChart.off('change');\r\n        $selectChart.val(initType);\r\n        $selectChart.change(() => {\r\n            this.show($selectChart.val());\r\n        });\r\n\r\n    };\r\n}\r\n\r\nfunction dataSrc(title, data) {\r\n    this.column2d = {\r\n        \"caption\": title,\r\n        \"yAxisName\": \"数量\",\r\n        \"theme\": \"fint\"\r\n    };\r\n    this.pie2d = {\r\n        \"caption\": title,\r\n        \"showBorder\": \"0\",\r\n        \"use3DLighting\": \"0\",\r\n        \"enableSmartLabels\": \"0\",\r\n        \"startingAngle\": \"310\",\r\n        \"showLabels\": \"0\",\r\n        \"showPercentValues\": \"1\",\r\n        \"showLegend\": \"1\",\r\n        \"centerLabelBold\": \"1\",\r\n        \"showTooltip\": \"0\",\r\n        \"decimals\": \"0\",\r\n        \"useDataPlotColorForLabels\": \"1\",\r\n        \"theme\": \"fint\"\r\n    };\r\n    this.column3d = {\r\n        \"caption\": title,\r\n        \"yAxisName\": \"数量\",\r\n        \"theme\": \"fint\"\r\n    };\r\n    this.pie3d = {\r\n        \"caption\": title,\r\n        \"showBorder\": \"0\",\r\n        \"use3DLighting\": \"0\",\r\n        \"enableSmartLabels\": \"0\",\r\n        \"startingAngle\": \"310\",\r\n        \"showLabels\": \"0\",\r\n        \"showPercentValues\": \"1\",\r\n        \"showLegend\": \"1\",\r\n        \"centerLabelBold\": \"1\",\r\n        \"showTooltip\": \"0\",\r\n        \"decimals\": \"0\",\r\n        \"useDataPlotColorForLabels\": \"1\",\r\n        \"theme\": \"fint\"\r\n    };\r\n    this.line2d = {\r\n        \"caption\": title,\r\n        \"yAxisName\": \"数量\",\r\n        \"lineThickness\": \"2\",\r\n        \"paletteColors\": \"#0075c2\",\r\n        \"baseFontColor\": \"#333333\",\r\n        \"baseFont\": \"Helvetica Neue,Arial\",\r\n        \"captionFontSize\": \"14\",\r\n        \"subcaptionFontSize\": \"14\",\r\n        \"subcaptionFontBold\": \"0\",\r\n        \"showBorder\": \"0\",\r\n        \"bgColor\": \"#ffffff\",\r\n        \"showShadow\": \"0\",\r\n        \"canvasBgColor\": \"#ffffff\",\r\n        \"canvasBorderAlpha\": \"0\",\r\n        \"divlineAlpha\": \"100\",\r\n        \"divlineColor\": \"#999999\",\r\n        \"divlineThickness\": \"1\",\r\n        \"divLineIsDashed\": \"1\",\r\n        \"divLineDashLen\": \"1\",\r\n        \"divLineGapLen\": \"1\",\r\n        \"showXAxisLine\": \"1\",\r\n        \"xAxisLineThickness\": \"1\",\r\n        \"xAxisLineColor\": \"#999999\",\r\n        \"showAlternateHGridColor\": \"0\"\r\n    };\r\n    this.data = data;\r\n}\r\n\r\nfunction toggleEdit() {\r\n    var editBtn = $(this);\r\n    var submitBtn = editBtn.next('.button.submit');\r\n\r\n}\r\n\r\nfunction startEdit() {\r\n    var editBtn = $(this);\r\n    var container = editBtn.parent('.popup-content-custom');\r\n    editBtn.addClass('hidden');\r\n    container.find('.in-edit').removeClass('hidden');\r\n    $('td.display').addClass('hidden');\r\n    $('td.input').removeClass('hidden');\r\n}\r\n\r\nfunction cancelEdit() {\r\n    var container = $(this).parent('.popup-content-custom');\r\n    var editBtn = container.find('.edit');\r\n    container.find('.in-edit').addClass('hidden');\r\n    editBtn.removeClass('hidden');\r\n    $('td.input').addClass('hidden');\r\n    $('td.display').removeClass('hidden');\r\n}\r\n\r\nfunction submitEdit() {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.withCredentials = false;\r\n    xhr.open('POST', '/update');\r\n\r\n    xhr.onload = function() {\r\n        var json = JSON.parse(xhr.responseText);\r\n        hero.css({ 'background': 'url(\"http://' + window.location.host + json.location + '\")', 'background-size': 'cover' });\r\n        $('.input-hero-img').val(json.location).change();\r\n        //label.removeClass('pct').addClass('btn').text('change');\r\n        $('.temp-input').remove();\r\n    };\r\n    //xhr.upload.addEventListener(\"progress\", updateProgress, false);\r\n    var frm = $(this).next('form')[0];\r\n    var formData = new FormData(frm);\r\n    var fid = $(this).data('id');\r\n    formData.append('id', fid);\r\n    xhr.send(formData);\r\n}\r\n"],"sourceRoot":"/source/"}