"use strict";require(["esri/Map","esri/views/MapView","esri/layers/MapImageLayer","esri/layers/FeatureLayer","esri/PopupTemplate","esri/widgets/Legend","esri/widgets/Compass","esri/widgets/Compass/CompassViewModel","esri/widgets/Home","esri/widgets/Home/HomeViewModel","esri/widgets/BasemapToggle","esri/widgets/Popup","esri/tasks/QueryTask","esri/tasks/support/Query","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleMarkerSymbol","esri/layers/GraphicsLayer","esri/Graphic","esri/geometry/Circle","esri/geometry/Point","esri/renderers/SimpleRenderer","esri/renderers/ClassBreaksRenderer","dojo/domReady!"],function(e,t,i,r,o,s,n,a,d,l,u,c,p,v,w,h,g,m,b,y,f,I){var M=new e({basemap:"oceans"}),D=new t({container:"map-container",map:M,zoom:9,center:[121,33]});D.then(function(){function e(e){var t=e.features,i=(new h({color:[26,119,80,.7],outline:{color:[255,255,255],width:1}}),new w({color:[26,119,80,.7],outline:{color:[255,255,255],width:2}}),[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"radius",alias:"radius",type:"double"},{name:"radius2",alias:"radius2",type:"double"}]);i=i.concat(z[1].fields);var o={type:"color",field:"radius",stops:[{value:4,color:[45,195,125,.9]},{value:10,color:[45,195,125,.4]}]},s={type:"color",field:"radius2",stops:[{value:4,color:[155,45,95,.9]},{value:10,color:[155,45,95,.4]}]},n={type:"size",field:"radius",valueUnit:"unknown",stops:[{value:4,size:8},{value:6,size:24},{value:8,size:36},{value:10,size:42},{value:12,size:100}]},a={type:"size",field:"radius2",valueUnit:"unknown",stops:[{value:4,size:42},{value:6,size:36},{value:8,size:24},{value:10,size:8}]},d=new f({symbol:new h({color:[255,105,55,.7],outline:{color:[255,255,255,.6],width:1}}),visualVariables:[o,n]}),l=new f({symbol:new h({color:[255,105,55,.7],outline:{color:[255,255,255,.8],width:1}}),visualVariables:[s,a]});t.forEach(function(e,t){var i=e.attributes,r=(i.ZIP+" ("+i.PO_NAME+")",e.geometry),o=(new y({longitude:r.longitude?r.longitude:r.centroid.longitude,latitude:r.latitude?r.latitude:r.centroid.latitude}),e.attributes.FID>1800?10:e.attributes.FID>1700?8:e.attributes.FID>1500?6:4);new b({radius:o,radiusUnit:"miles",center:e.geometry.getPoint(0,0)});e.attributes.ObjectID=t,e.attributes.radius=o,e.attributes.radius2=14-o});var u=new r({source:t,fields:i,objectIdField:"ObjectID",renderer:d,geometryType:"polygon",id:"vs"});M.add(u),M.reorder(u,99);var c=new r({source:t,fields:i,objectIdField:"ObjectID",renderer:l,geometryType:"polygon",id:"vs2"});M.reorder(c,99)}var t='<table class="ui celled table"><tbody><tr><td>区域ID</td><td>{FID}</td></tr><tr><td>radius</td><td>{radius}</td></tr><tr><td>配号来源</td><td>{配号来源}</td></tr><tr><td>用海一级类</td><td>{用海一级类}</td></tr><tr><td>用海二级类</td><td>{用海二级类}</td></tr><tr><td>用海方式</td><td>{用海方式}</td></tr><tr><td class="projects">项目数量</td><td>*</td></tr></tbody></table>',i=new n({viewModel:new a({view:D})},"compass");i.startup();var c=new d({viewModel:new l({view:D})},"home");c.startup();var p=new u({view:D,nextBasemap:"hybrid"},"basemap");p.startup();var v=new s({view:D});v.startup(),D.ui.add(v,"bottom-right");var g=new r({id:"base",url:"http://localhost:6080/arcgis/rest/services/区域/MapServer/0"});M.add(g),M.reorder(g,0);var m={on:!0,toggle:function(){this.on?M.remove(g):(M.add(g),M.reorder(g,0)),this.on=!this.on}},I=["功能区划","确权数据","确权数据--配号来源","确权数据--用海一级类","确权数据--用海二级类","确权数据--用海方式"],z=[];z[1]=new r({id:I[1],outFields:["*"],url:"http://localhost:6080/arcgis/rest/services/用海信息/MapServer/1",popupTemplate:new o({title:"ID: {FID}",content:t})}),M.add(z[1]);for(var F=2;6>F;F++){var x=new r({id:I[F],outFields:["*"],url:"http://localhost:6080/arcgis/rest/services/用海信息/MapServer/"+F,popupTemplate:new o({title:"ID: {FID}",content:t})});z[F]=x}var S={inviewIndex:1,on:!0,switchTo:function(e){e!==this.inviewIndex&&(M.remove(z[this.inviewIndex]),M.add(z[e]),M.reorder(z[e],1),this.inviewIndex=e)},show:function(){M.add(z[this.inviewIndex]),M.reorder(z[this.inviewIndex],1),this.on=!0},hide:function(){M.remove(z[this.inviewIndex]),this.on=!1},toggle:function(){this.on?(M.remove(z[this.inviewIndex]),this.on=!1):(M.add(z[this.inviewIndex]),M.reorder(z[this.inviewIndex],1),this.on=!0)}};z[1].then(function(){z[1].queryFeatures().then(e)}),$("input.toggle.toggle-zoning").change(function(){m.toggle()}),$("input.toggle.toggle-auth").change(function(){S.toggle()}),$("select[name=authLyr]").change(function(){S.switchTo($(this).val())});var T=function(){var e=1;return function(){var t=$(".esri-popup-content")[0];if(1===e&&t.childElementCount>0){$(".esri-popup-content").unbind("DOMSubtreeModified");var i=$(".esri-popup-content").find(".data-fid.loader").data("fid");i&&$.get("http://localhost:3000/popup_content?id="+i,function(e){$(".esri-popup-content").html(e),$(".ui.dropdown").dropdown(),$(".popup-content-custom table").find("a").click(function(){var e=$(this).data("type"),t="SELECT `"+e+"` as label, count(`"+e+"` = `"+e+"`) as value FROM gis1.authorizing group by `"+e+"`";createChart(t,e)}),$(".esri-popup-content").bind("DOMSubtreeModified",T)}),e=0}t.childElementCount<1&&(e=1)}}()})});
//# sourceMappingURL=../maps/core.babeled.min.js.map
