"use strict";require(["esri/Map","esri/views/MapView","esri/layers/ArcGISDynamicLayer","esri/layers/FeatureLayer","esri/PopupTemplate","esri/widgets/Legend","esri/widgets/Compass","esri/widgets/Compass/CompassViewModel","esri/widgets/Home","esri/widgets/Home/HomeViewModel","dojo/domReady!"],function(e,t,i,r,s,a,n,o,d,l){var c=new e({basemap:"oceans"}),v=new t({container:"map-container",map:c,zoom:9,center:[121.5,33]}),p="<b>{FID}</b> {OBJECTID}<br>功能区类型:{功能区类型}<br>{SHAPE_LEN}<img src='https://www.google.com/logos/doodles/2016/mohammed-ghani-hikmats-87th-birthday-5708620060688384-hp2x.jpg' />",h=(new s({title:"{FID}",content:p}),{});$.get("http://localhost:6080/arcgis/rest/services/04202/MapServer/legend?f=pjson",function(e){h=e});var f=new r({id:"功能区划",url:"http://localhost:6080/arcgis/rest/services/04202/MapServer/5"});c.add(f);var w=new r({url:"http://localhost:6080/arcgis/rest/services/04202/MapServer/2",definitionExpression:"用海一级类 = '渔业用海'",popupTemplate:new s({title:"title",content:"layer.No.<b>{FID}</b>"})});c.add(w);var u=new n({viewModel:new o({view:v})},"compass");u.startup();var g=new d({viewModel:new l({view:v})},"home");g.startup();var b=new a({view:v},"legend");b.startup();var m=function(){var e=["确权数据","确权数据--配号来源","确权数据--用海一级类","确权数据--用海二级类","确权数据--用海方式","功能区划"],t=new r({id:e[0],url:"http://localhost:6080/arcgis/rest/services/04202/MapServer/0",popupTemplate:new s({title:"title",content:"layer.No."+a+"<b>{FID}</b>"})});c.add(t);var i={};i[t.id]=t;for(var a=1;5>a;a++){var n=new r({id:e[a],url:"http://localhost:6080/arcgis/rest/services/04202/MapServer/"+a,popupTemplate:new s({title:"title",content:"layer.No."+a+"<br><b>{FID}</b>{用海一级类}"})});n.visible=!1,c.add(n),i[n.id]=n}return{to:function(t){for(var r in i)i[r].visible=!1,r==e[t]&&(i[r].visible=!0);b.refresh()},show:function(e){i[e].visible=!0,b.refresh(),y.setCheckbox()},hide:function(e){i[e].visible=!1,b.refresh(),y.setCheckbox()}}}();$("#aythLyrCata").change(function(){m.to($(this).val())});var y=function(){function e(){$(".esri-legend-service").each(function(){var e=$(this),s=e.find(".esri-legend-service-label").text(),a=s.substring(s.lastIndexOf(" ")+1);console.log(a);var n=e.find(".esri-legend-layer").first();n.find("tr").each(function(){var e=$(this),s=e.find("td");if(s&&s.length&&s.length>1){var n=$(this).find("td").first();$(this).find("td").each(function(){var e=$(this);if(!e.find("table")[0]){var s=$(this).text();if(s&&s.length>0){var o=i.indexOf(a),d=new r({id:a+"_"+s,url:"http://localhost:6080/arcgis/rest/services/04202/MapServer/"+o,definitionExpression:a+" = '"+s+"'"});c.add(d),t[d.id]=d;var l=$("<input>").attr({type:"checkbox","data-lyr":a,"data-cata":s,"data-lyrid":a+"_"+s}).prop("checked",!0).text(s).change(function(){var e=$(this).data("lyrid");return $(this).is(":checked")?void(t[e].visible=!0):void(t[e].visible=!1)}),v=$("<td>").append(l);v.insertBefore(n)}}})}})})}var t={},i=["确权数据","确权数据--配号来源","确权数据--用海一级类","确权数据--用海二级类","确权数据--用海方式","功能区划"];return{setCheckbox:e}}()});
//# sourceMappingURL=../maps/core.babeled.min.js.map
