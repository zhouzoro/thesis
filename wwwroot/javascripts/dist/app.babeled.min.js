"use strict";function clearSearch(){var e=$('input[name="search"');e.val("");var t=$("#searchResult.results");t.removeClass("visible");var i=t.find(".download-results");i.hide(),$("i.icon.search").show(),$("i.icon.remove").hide(),$(".category.results").hide()}function stackedMeta(e,t){this.stackedcolumn2d={caption:e,xAxisname:t,yAxisName:"数量",showSum:"1",theme:"fint"},this.stackedcolumn3d=this.stackedcolumn2d}function dataSrc(e){this.column2d={caption:e,yAxisName:"数量",theme:"fint"},this.pie2d={caption:e,showBorder:"0",use3DLighting:"0",enableSmartLabels:"0",startingAngle:"310",showLabels:"0",showPercentValues:"1",showLegend:"1",centerLabelBold:"1",showTooltip:"0",decimals:"0",useDataPlotColorForLabels:"1",theme:"fint"},this.column3d=this.column2d,this.pie3d=this.pie2d,this.line2d={caption:e,yAxisName:"数量",lineThickness:"2",paletteColors:"#0075c2",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",canvasBorderAlpha:"0",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999",showAlternateHGridColor:"0"}}function showProjects(){var e=$(".esri-popup-renderer-text.esri-popup-renderer-content-element"),t=e.find(".projects-link");e.html('<div class="ui segment"><div class="ui active inverted dimmer"><div class="ui loader"></div></div><p></p></div>');var i="/mysql/get_projects?zone="+t.data("zone");t.data("field")&&(i+="&field="+t.data("field")+"&val="+t.data("val")),$.get(i,function(i){return""==i?void e.html("该区域没有项目信息"):(e.html(i),t.data("field")&&$("h1.esri-title").append(": "+t.data("val")+"项目"),$(".projects .ui.styled.fluid.accordion").accordion(),$(".projects .content .edit-project").click(startEdit),void $(".content a.enlarge").click(function(){showProj($(this).data("id"))}))})}function showProj(e){$.get("/mysql/project?id="+e,function(e){$("#modal").html('<i class="close fa fa-remove" />'),$("#modal").append(e),$("#modal").modal("show"),$(".modal .content .edit-project").click(startEdit)})}function deleteProject(){$("#modal .content").html('<div class="ui segment"><div class="ui active inverted dimmer"><div class="ui loader"></div></div><p></p></div>'),$.get($(this.data("href")),function(e){e.ok?$("#modal .loader").text("信息已删除"):$("#modal .loader").text("删除时发生错误")})}function startEdit(){var e="/mysql/edit_project?id="+$(this).data("id");$("#modal .content").html('<div class="ui segment"><div class="ui active inverted dimmer"><div class="ui loader"></div></div><p></p></div>'),$.get(e,function(e){$("#modal .content").html(e),$(".ui.dropdown").dropdown(),$("#modal").modal("show"),$(".save-project").click(function(){var e=$(this.data("id")),t=new XMLHttpRequest;t.open("POST","/mysql/edit_project？id="+e),t.onload=function(){var e=JSON.parse(t.responseText);e.ok&&$.get("/mysql/project?id="+e.id,function(e){$("#modal .content").html($(e).find(".content")),$(".modal .content .edit-project").click(startEdit)})};var i=new FormData($("form.project")[0]);t.send(i)})})}$(document).ready(function(){function e(){$("#bottom-left-view").removeClass("large"),o.changeSize(500,300),$(this).hide(),$("#bottom-left-view #buttons i.fa.fa-expand.expand").show()}function t(){$("#bottom-left-view").addClass("large"),o.changeSize(840,500),$(this).hide(),$("#bottom-left-view #buttons i.fa.fa-compress.compress").show()}$(".toggle.checkbox.base-toggle").checkbox().checkbox("check"),$(".ui.dropdown").dropdown(),$(".ui.accordion").accordion(),$(".tabular.menu .item").tab(),$(".advanced-search.button").click(function(){var e=$("this"),t=$("#map-container .advanced");t.hasClass("shown")?(t.removeClass("shown"),e.text("高级")):(t.addClass("shown"),$('a.item[data-tab="first"]').click(),e.text("收起"))}),$(".toggle-chart.checkbox").checkbox().checkbox({onChecked:function(){$("#bottom-left-view").show()},onUnchecked:function(){$("#bottom-left-view").hide()}});var i={projects:["项目进展情况","填海情况","填海超面积情况","海域使用上报情况","动态监测情况","违法情况","用海调整情况","调整上报情况","调整上报审批情况","确权发证情况","受益方上报情况","受益方上报审批情况"],authorizing:["配号来源","用海一级类","用海二级类","用海方式"]},o=function(){function e(e){p=e,a()}function t(e,t){w=e,g=t,a()}function o(e,t){f={},m={},l=t,r=e,h="",v="column2d";var i="SELECT `"+e+"` as label, count(`"+e+"` = `"+e+"`) as value FROM gis1."+t+" group by `"+e+"`";$.get("/mysql/exq?qs="+i,function(t){c=t,f=new dataSrc(e+"数量统计"),a()})}function a(e){v=e?e:v,m={events:{chartClick:function(e,t){console.log(e),console.log(t)},dataLabelClick:function(e,t){console.log(e),console.log(t)}}},0===v.lastIndexOf("stacked")?(m=d,m.chart=u[v]):(m.data=c,m.chart=f[v]),FusionCharts.ready(function(){var e=new FusionCharts({type:v,renderAt:p,width:w,height:g,dataFormat:"json",dataSource:m});e.render()})}function n(e){if(e!==v)if(v=e,0===v.lastIndexOf("stacked")){if(""==h){for(var t in i[l])if(i[l][t]==r){h=i[l][(t+1)%i[l].length],$("select[name=series]").dropdown("set selected",h);break}$.get("/mysql/get_stacked_data?field1="+r+"&field2="+h+"&tb="+l,function(e){d=e,u=new stackedMeta(r+"按"+h+"分类统计",r),a()})}var o=$("select[name=series]").val();h===o?a():$.get("/mysql/get_stacked_data?field1="+r+"&field2="+h+"&tb="+l,function(e){d=e,u=new stackedMeta(r+"按"+h+"分类统计",r),a(),h=o})}else a()}function s(e){h!==e&&r!==e&&(h=e,$.get("/mysql/get_stacked_data?field1="+r+"&field2="+h+"&tb="+l,function(e){d=e,u=new stackedMeta(r+"按"+h+"分类统计",r),a()}))}var c=[],d={},l="",r="",h="",f={},u={},m={},v="",p="myChart",w=500,g=300;return{renderChart:o,switchType:n,switchSrc:s,changeContainer:e,changeSize:t}}();$(".toggle-chart.checkbox").checkbox().checkbox("uncheck"),$(".toggle-chart.checkbox").checkbox().checkbox({onChecked:function(){$("#bottom-left-view").show(),$("#myChart.chart").html('<div class="ui segment"><div class="ui active inverted dimmer"><div class="ui loader"></div></div><p></p></div>');var e=$(this).data("type");$(".chart-selection.series.auth").hide(),$(".chart-selection.series.proj").show(),$(".series-container").hide(),$("select[name=chartType]").dropdown("set selected","column2d"),o.renderChart(e,"projects")},onUnchecked:function(){$("#bottom-left-view").hide()}}),$(".item.statistic.auth").click(function(){$("#bottom-left-view").show(),$("#myChart.chart").html('<div class="ui segment"><div class="ui active inverted dimmer"><div class="ui loader"></div></div><p></p></div>');var e=$(this).data("type");$(".chart-selection.series.proj").hide(),$(".chart-selection.series.auth").show(),$(".series-container").hide(),$("select[name=chartType]").dropdown("set selected","column2d"),o.renderChart(e,"authorizing")}),$("select[name=chartType]").change(function(){var e=$(this).val();0===e.lastIndexOf("stacked")?$(".series-container").show():$(".series-container").hide(),o.switchType(e)}),$("select[name=series]").change(function(){o.switchSrc($(this).val())}),$("a#fullScreen").click(function(){var e=$(this),t=$("body");t.hasClass("full-screen")?(t.removeClass("full-screen"),e.find(".fa-compress").hide(),e.find(".fa-expand").show(),e.attr("title","exit full screen")):(t.addClass("full-screen"),e.find(".fa-expand").hide(),e.find(".fa-compress").show(),e.attr("title","expand full screen"))}),$("#bottom-left-view #buttons i.fa.fa-expand.expand").click(t),$("#bottom-left-view #buttons i.fa.fa-compress.compress").click(e)});
//# sourceMappingURL=d:/inetpub/wwwroot/javascripts/maps/app.babeled.min.js.map
